{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{443:function(t,s,a){\"use strict\";a.r(s);var n=a(56),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h2\",{attrs:{id:\"什么是跨域\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#什么是跨域\"}},[t._v(\"#\")]),t._v(\" 什么是跨域\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"怎么解决跨域\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#怎么解决跨域\"}},[t._v(\"#\")]),t._v(\" 怎么解决跨域\")]),t._v(\" \"),a(\"p\",[t._v(\"跨域：动态创建\"),a(\"code\",[t._v(\"<script>\")]),t._v(\"标签，然后利用\"),a(\"code\",[t._v(\"<script>\")]),t._v(\"的src 不受同源策略约束来跨域获取数据\")]),t._v(\" \"),a(\"p\",[t._v(\"指定端口开启一个静态服务器：npx http-server -p 3000\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"jsonp： 请求js不跨域\")]),t._v(\" \"),a(\"p\",[t._v(\"​\\t（1）编写代码:前端人员编写 全局函数 + script标签 + 传递函数名\")]),t._v(\" \"),a(\"p\",[t._v(\"​    （2）后端人员: 响应 函数名('数据') 的字符串,让script标签执行\")]),t._v(\" \"),a(\"p\",[t._v(\"​    （3）jsonp请求方式必须是GET\")])])]),t._v(\" \"),a(\"p\",[t._v(\"jsonp、 iframe、window.name、window.postMessage、服务器上设置代理页面\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"反向代理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#反向代理\"}},[t._v(\"#\")]),t._v(\" 反向代理\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// vue.config.js\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"devServer\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"port\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"8080\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"proxy\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token string-property property\"}},[t._v(\"'/ajax'\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"target\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'http://...'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n                    \"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"changeOrigin\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n                        \"),a(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[t._v(\"pathRewrite\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                            \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\"\\n                        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),a(\"h4\",{attrs:{id:\"正向代理和反向代理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#正向代理和反向代理\"}},[t._v(\"#\")]),t._v(\" 正向代理和反向代理\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"代理的对象不同\")]),t._v(\" \"),a(\"li\",[t._v(\"正向代理代理的客户端，代理客服端向服务器发送请求\")]),t._v(\" \"),a(\"li\",[t._v(\"反向代理代理的是服务器，代理服务器接受客户端发送的请求\")])]),t._v(\" \"),a(\"hr\"),t._v(\" \"),a(\"h3\",{attrs:{id:\"jsonp\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jsonp\"}},[t._v(\"#\")]),t._v(\" JSONP\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"只能用于get请求\")])]),t._v(\" \"),a(\"p\",[t._v(\"JSONP是一种非正式传输协议，该协议的一个要点就是允许用户传递一个callback参数\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-html extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[a(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),t._v(\"script\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"src\")]),a(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation attr-equals\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"http://127.0.0.1:10010/js?call=callfun\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),a(\"span\",{pre:!0,attrs:{class:\"token script\"}}),a(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[a(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"</\")]),t._v(\"script\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\">\")])]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"给服务端，然后服务端返回数据时会将这个callback参数作为函数名来包裹住JSON数据，这里的ctx.query.call代表callfun\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"ctx\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"body \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" ctx\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"query\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"call \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'(\\\"nihao\\\")'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"这样客户端就可以随意定制自己的函数来自动处理返回数据了\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"cors\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cors\"}},[t._v(\"#\")]),t._v(\" CORS\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"后端实现\")]),t._v(\" \"),a(\"li\",[t._v(\"服务端设置Access-Control-Allow-Origin为’*‘，表示所有网站都可以访问资源\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"document-domain\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#document-domain\"}},[t._v(\"#\")]),t._v(\" document.domain\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"只能用于二级域名相同的情况，给页面添加document.domain='二级域名'，表示二级域名相同就可以跨域\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"postmessage\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#postmessage\"}},[t._v(\"#\")]),t._v(\" postMessage\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"通常用于获取嵌入页面中的第三方页面数据\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-js extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 发送消息端\")]),t._v(\"\\nwindow\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"parent\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"postMessage\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'message'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'http://test.com'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 接收消息端\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" mc \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"MessageChannel\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nmc\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"addEventListener\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'message'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"event\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" origin \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" event\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"origin \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"||\")]),t._v(\" event\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"originalEvent\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"origin\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"origin \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"===\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'http://test.com'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    console\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'验证通过'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}