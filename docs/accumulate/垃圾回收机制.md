## **garbage collection**

- 手动回收
- 自动回收

1. 标记内存空间中的活动对象和非活动对象
2. 删除非活动对象，释放内存空间
3. 整理内存空间，避免产生内存碎片

## 标记清除

1. 标记活动对象
2. 清除未标记对象

- 缺点：产生大量内存碎片

## 复制算法

1. 内存空间分为from和to两部分
2. 先在from空间进行内存分配，空间占满后，标记活动对象，并把活动对象复制到to
3. 将from和to空间互换

- 缺点：复制需要时间；内存空间减少一半

## 引用计数

1. 实时统计指向对象的引用数
2. 当引用数为0时，回收对象

- 缺点：循环引用

## 标记-压缩算法

1. 标记活动对象
2. 将所有活动对象移动到内存一端
3. 清除边界外的内存

## 代际假说和分代收集

1. 大多数对象生命周期很短
2. 一直存活的对象通常会存在很久，所以对象的生存期存在两极分化

将对象进行分代，对不同的分代实施不同的垃圾回收算法

## JS垃圾回收

### 栈中垃圾回收

- ESP（extened stack pointer）：扩展栈指针，用于存放函数栈顶指针
- js执行函数时，将其上下文压入栈中，ESP上移，函数执行技术，弹出，ESP下移

### 堆中垃圾回收

- 堆空间分为新生代和老生代，对两个区域实施不同的垃圾回收策略
- 新生代空间存放生命周期短、小的对象，使用复制算法，新生代中经过两次垃圾回收后仍然存活的对象会晋升到老生代空间
- 老生代空间存放生命周期长、大的对象，使用标记 - 压缩算法